<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>{% block title %}Gestor de Tareas{% endblock %}</title>
    {% load static %}
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
</head>
<body class="bg-light">
<nav class="navbar navbar-expand-lg navbar-dark bg-dark px-3">
  <a class="navbar-brand" href="/">ğŸ—‚ï¸ Gestor de Tareas</a>

  <div class="navbar-nav">
    <a class="nav-link" href="{% url 'about' %}">Acerca de mÃ­</a>
    <a class="nav-link" href="/">Panel</a>
    <a class="nav-link" href="/tarea/">Nueva Tarea</a>

    {% if request.user.is_authenticated %}
      <a class="nav-link" href="{% url 'editar_perfil' %}">Editar perfil</a>
      <a class="nav-link" href="#" onclick="document.getElementById('logout-form').submit(); return false;">Cerrar sesiÃ³n</a>
      <form id="logout-form" action="{% url 'cerrar_sesion' %}" method="POST" style="display:none;">
        {% csrf_token %}
      </form>
    {% else %}
      <a class="nav-link" href="/logging/">Iniciar sesiÃ³n</a>
    {% endif %}
  </div>

  {% if user.is_authenticated %}
    <span class="navbar-text d-flex align-items-center text-white ms-auto">
      {% if user.profile.avatar %}
        <img src="{{ user.profile.avatar.url }}" alt="Avatar"
             class="rounded-circle me-2"
             style="width:35px; height:35px; object-fit:cover; border:1px solid #fff;">
      {% else %}
        <img src="{% static 'avatars/default.png' %}" alt="Avatar"
             class="rounded-circle me-2"
             style="width:35px; height:35px; object-fit:cover; border:1px solid #fff;">
      {% endif %}
      {{ user.username }}
    </span>
  {% endif %}
</nav>

<div class="container mt-4">
  {% block content %}{% endblock %}
</div>
</body>
</html>